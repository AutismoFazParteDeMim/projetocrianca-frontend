// ignore_for_file: lines_longer_than_80_chars

import 'package:firebase_auth/firebase_auth.dart';
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:projeto_crianca/data/models/child_model.dart';
import 'package:projeto_crianca/data/models/user_model.dart';
import 'package:projeto_crianca/data/repositories/register_repository.dart';
import 'package:projeto_crianca/mixins/dialog_mixin.dart';
import 'package:projeto_crianca/ui/widgets/alert_modal_component.dart';

class RegisterPageController extends GetxController with DialogMixin {
  RegisterPageController(this.repository);

  final RegisterRepository repository;

  //keys
  final GlobalKey<FormState> _formKey = GlobalKey<FormState>();
  final GlobalKey<FormState> _childFormKey = GlobalKey<FormState>();

  //controllers
  final TextEditingController _nameFieldController = TextEditingController();
  final TextEditingController _emailFieldController = TextEditingController();
  final TextEditingController _passFieldController = TextEditingController();
  final TextEditingController _childFieldController = TextEditingController();

  //vars
  final Rx<String> _childSex = Rx<String>('');

  //getters
  GlobalKey<FormState> get getFormKey => _formKey;
  GlobalKey<FormState> get getChildFormKey => _childFormKey;
  TextEditingController get getNameFieldController => _nameFieldController;
  TextEditingController get getEmailFieldController => _emailFieldController;
  TextEditingController get getPassFieldController => _passFieldController;
  TextEditingController get getChildFieldController => _childFieldController;
  String get getChildSex => _childSex.value;

  //setters
  set setChildSex(String value) => _childSex.value = value;

  @override
  void onClose() {
    super.onClose();

    _nameFieldController.dispose();
    _emailFieldController.dispose();
    _passFieldController.dispose();
    _childFieldController.dispose();
  }

  Future<void> registerWithEmailAndPass() async {
    try {
      final userInstance = await repository.registerWithEmailAndPass(
        _emailFieldController.text,
        _passFieldController.text,
      );
      await repository
          .updateUser(
            userInstance!,
            UserModel(name: _nameFieldController.text),
          )
          .then(
            (value) async => repository.createChild(
              userInstance,
              ChildModel(
                name: _childFieldController.text,
                sex: _childSex.value,
                photoURL: _childSex.value == 'male'
                    ? '''<svg xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns#' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#' xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 480 480' fill='none'><metadata><rdf:RDF><cc:Work><dc:format>image/svg+xml</dc:format><dc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage'/><dc:title>Custom Avatar</dc:title><dc:creator><cc:Agent><dc:title>Ashley Seo</dc:title></cc:Agent></dc:creator><dc:source>https://www.figma.com/community/file/881358461963645496</dc:source><cc:license rdf:resource='https://creativecommons.org/licenses/by/4.0/'/></cc:Work><cc:License rdf:about='https://creativecommons.org/licenses/by/4.0/'><cc:permits rdf:resource='https://creativecommons.org/ns#Reproduction'/><cc:permits rdf:resource='https://creativecommons.org/ns#Distribution'/><cc:permits rdf:resource='https://creativecommons.org/ns#DerivativeWorks'/><cc:requires rdf:resource='https://creativecommons.org/ns#Notice'/><cc:requires rdf:resource='https://creativecommons.org/ns#Attribution'/></cc:License></rdf:RDF></metadata><mask id='avatarsRadiusMask'><rect width='480' height='480' rx='0' ry='0' x='0' y='0' fill='#fff'/></mask><g mask='url(#avatarsRadiusMask)'><g transform='matrix(.85775 0 0 .85427 52 47)'><path d='M263.989 38.62s131.387 20.593 121.424 208.128c-.036.695 15.192 10.822 16.384 11.904 10.619 9.62 19.527 21.94 23.423 36.351 13.872 51.319-35.724 104.196-75.83 118.231-14.981 5.242-30.815 7.787-46.681 8.249-103.139 3.009-239.69-62.655-246.703-190.893a172.056 172.056 0 0 1-.195-13.802c.621-24.349 6.488-48.063 15.33-70.082-.004.001 57.398-142.617 192.848-108.085Z' fill='rgba(100, 61, 25, 1)'/><path d='M388.739 248.727c-1.423 3.492-2.844 7.955-3.241 10.507-1.694 10.947 2.045 22.252 8.54 30.378 6.168 7.716 14.976 12.72 23.506 14.607 2.88.637 6.367.964 9.416 1.067-3.204-31.703-28.973-50.725-38.221-56.559ZM203.534 332.051c24.406-5.26 39.558-31.017 33.844-57.531-5.714-26.514-30.13-43.744-54.535-38.484-24.405 5.259-39.558 31.016-33.844 57.53 5.714 26.514 30.13 43.744 54.535 38.485Z' fill='#DC2400' style='mix-blend-mode:multiply' opacity='.1'/><path opacity='.1' d='M323.014 257.889s20.842-19.864 36.977-1.188Z' fill='#000'/><g><path d='M128.679 356.869c-69.38 34.83-132.35-52.512-112.18-101.609 12.866-31.317 50.38-33.752 72.118-5.146 12.829 16.883 23.209 38.464 29.103 59.108' fill='rgba(100, 61, 25, 1)'/><path opacity='.1' d='M71.534 278.927c8.927 9.099 16.103 22.593 24.923 30.12-1.63-12.595-4.232-26.045-10.34-37.396-6.201-11.528-17.479-21.025-28.962-20.242-14.23.971-25.947 17.573-27.454 32.626.9-9.008 18.99-15.104 25.894-14.251 10.812 20.413 14.998 60.644 14.998 60.644 9.007-22.775 5.36-40.689.941-51.501Z' fill='#000'/></g></g><g transform='matrix(.85472 0 0 .855 19 -17)'><path d='M393.348 366.944c3.015 1.731 24.097-24.743 38.134-16.689 4.739 2.719 8.354 7.356 11.069 12.367 5.966 11.023 8.007 24.415 5.604 36.769-3.401 17.468-15.188 31.769-29.053 41.248-37.308 25.5-66.905 20.68-106.724 5.918-31.343-11.617-74.048-35.531-65.201-78.677 15.573-75.95 146.132-.958 146.171-.936Z' fill='#873C41'/><path d='M285.336 362.088c10.139 6.294 22.484 6.943 33.556 4.433 2.118-.482 3.82 1.296 4.347 3.339 5.406 21.004 36.059 31.967 51.431 18.499 1.193-1.046 3.309-1.293 4.559-.108 8.296 7.871 21.589 10.006 31.351 4.682 13.784-7.52 13.717-28.647 9.962-43.36-12.149 3.711-24.903 18.686-27.195 17.366-.03-.019-80.177-46.04-122.373-29.438.895 10.2 5.579 19.135 14.362 24.587Z' fill='#fff'/><path d='M400.293 443.788c-21.923-20.117-48.878-31.353-76.209-39.326-23.378-6.821-49.7-11.241-73.362-4.473 10.965 23.534 39.18 38.231 61.656 46.564 34.832 12.911 61.843 18.215 93.031 2.275-1.699-1.685-3.356-3.424-5.116-5.04Z' fill='#EE7E8B'/></g><g transform='matrix(.85472 0 0 .855 19 -17)'><g fill='#2A1200'><path d='M300.349 309.163c8.832-.16 17.674 3.022 25.496 7.773 4.691-4.793 6.946-12.983 5.183-21.539-2.472-12.006-11.824-20.057-20.887-17.979-9.064 2.078-14.402 13.498-11.926 25.504.461 2.254 1.232 4.311 2.134 6.241ZM416.11 310.627c1.302-2.877 2.067-6.392 1.993-10.23-.18-9.539-5.289-17.234-11.411-17.182-6.124.049-10.941 7.825-10.761 17.367.1 5.247 1.723 9.88 4.15 13.029 5.111-1.982 10.539-2.928 16.029-2.984Z'/></g><g fill='#71472D'><path d='M333.495 238.676c-13.683-2.225-28.346 2.887-38.189 13.256-3.173 3.343-4.061 9.273-.745 13.048 3.063 3.493 8.636 4.561 12.033.978a38.106 38.106 0 0 1 3.208-3.036c.351-.294 1.325-.816 1.631-1.249.171-.113.338-.226.513-.335a37.653 37.653 0 0 1 3.311-1.858 38.634 38.634 0 0 1 1.966-.902c.209-.087.419-.171.632-.256.582-.101 1.249-.416 1.78-.561a35.606 35.606 0 0 1 6.314-1.117c.67.003 1.339-.01 2.012.017 1.429.06 2.851.219 4.268.447 4.421.72 9.007-3.632 9.138-8.413.139-5.262-3.135-9.247-7.872-10.019ZM425.358 254.39c-4.968-6.836-12.27-11.322-20.146-12.625-2.126-.351-4.607.464-6.265 1.882-1.634 1.397-3.005 3.86-3.148 6.158-.147 2.387.324 4.948 1.815 6.825 1.511 1.903 3.407 3.111 5.715 3.496.378.062.745.168 1.122.25 1.11.383 2.183.856 3.23 1.411a23.874 23.874 0 0 1 3.349 2.746c.34.407.7.797 1.016 1.23 1.362 1.871 3.546 3.204 5.715 3.496 2.076.279 4.66-.388 6.264-1.886 1.663-1.55 2.996-3.699 3.148-6.158.153-2.451-.374-4.844-1.815-6.825Z'/></g></g><g transform='matrix(.85472 0 0 .85667 18 -15)'><path d='M94.157 287.598c-.13 4.598-.08 9.206.163 13.809 38.507 6.383 56.652 47.191 60.911 66.797 0 0 11.46.64 14.162-1.535 14.178-7.371 39.434-37.515 27.044-99.117-5.999-28-1.899-50.315 47.742-85.16 49.642-34.845 128.476-13.318 144.626-.35C401.725 192.416 403.097 194 407 196.5c-34.364-77.5-101.862-87.673-101.862-87.673-136.906-34.218-195.309 108.616-195.305 108.615-8.996 22.052-14.988 45.792-15.676 70.156Z' fill='rgba(34, 15, 0, 1)'/></g><g transform='matrix(.85472 0 0 .85667 14 -12)'/></g></svg>'''
                    : '''<svg xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns#' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#' xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 480 480' fill='none'><metadata><rdf:RDF><cc:Work><dc:format>image/svg+xml</dc:format><dc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage'/><dc:title>Custom Avatar</dc:title><dc:creator><cc:Agent><dc:title>Ashley Seo</dc:title></cc:Agent></dc:creator><dc:source>https://www.figma.com/community/file/881358461963645496</dc:source><cc:license rdf:resource='https://creativecommons.org/licenses/by/4.0/'/></cc:Work><cc:License rdf:about='https://creativecommons.org/licenses/by/4.0/'><cc:permits rdf:resource='https://creativecommons.org/ns#Reproduction'/><cc:permits rdf:resource='https://creativecommons.org/ns#Distribution'/><cc:permits rdf:resource='https://creativecommons.org/ns#DerivativeWorks'/><cc:requires rdf:resource='https://creativecommons.org/ns#Notice'/><cc:requires rdf:resource='https://creativecommons.org/ns#Attribution'/></cc:License></rdf:RDF></metadata><mask id='avatarsRadiusMask'><rect width='480' height='480' rx='0' ry='0' x='0' y='0' fill='#fff'/></mask><g mask='url(#avatarsRadiusMask)'><g transform='matrix(.85775 0 0 .85427 52 47)'><path d='M263.989 38.62s131.387 20.593 121.424 208.128c-.036.695 15.192 10.822 16.384 11.904 10.619 9.62 19.527 21.94 23.423 36.351 13.872 51.319-35.724 104.196-75.83 118.231-14.981 5.242-30.815 7.787-46.681 8.249-103.139 3.009-239.69-62.655-246.703-190.893a172.056 172.056 0 0 1-.195-13.802c.621-24.349 6.488-48.063 15.33-70.082-.004.001 57.398-142.617 192.848-108.085Z' fill='rgba(100, 61, 25, 1)'/><path d='M388.739 248.727c-1.423 3.492-2.844 7.955-3.241 10.507-1.694 10.947 2.045 22.252 8.54 30.378 6.168 7.716 14.976 12.72 23.506 14.607 2.88.637 6.367.964 9.416 1.067-3.204-31.703-28.973-50.725-38.221-56.559ZM203.534 332.051c24.406-5.26 39.558-31.017 33.844-57.531-5.714-26.514-30.13-43.744-54.535-38.484-24.405 5.259-39.558 31.016-33.844 57.53 5.714 26.514 30.13 43.744 54.535 38.485Z' fill='#DC2400' style='mix-blend-mode:multiply' opacity='.1'/><path opacity='.1' d='M323.014 257.889s20.842-19.864 36.977-1.188Z' fill='#000'/><g><path d='M128.679 356.869c-69.38 34.83-132.35-52.512-112.18-101.609 12.866-31.317 50.38-33.752 72.118-5.146 12.829 16.883 23.209 38.464 29.103 59.108' fill='rgba(100, 61, 25, 1)'/><path opacity='.1' d='M71.534 278.927c8.927 9.099 16.103 22.593 24.923 30.12-1.63-12.595-4.232-26.045-10.34-37.396-6.201-11.528-17.479-21.025-28.962-20.242-14.23.971-25.947 17.573-27.454 32.626.9-9.008 18.99-15.104 25.894-14.251 10.812 20.413 14.998 60.644 14.998 60.644 9.007-22.775 5.36-40.689.941-51.501Z' fill='#000'/></g></g><g transform='matrix(.85472 0 0 .855 19 -17)'><path d='M393.348 366.944c3.015 1.731 24.097-24.743 38.134-16.689 4.739 2.719 8.354 7.356 11.069 12.367 5.966 11.023 8.007 24.415 5.604 36.769-3.401 17.468-15.188 31.769-29.053 41.248-37.308 25.5-66.905 20.68-106.724 5.918-31.343-11.617-74.048-35.531-65.201-78.677 15.573-75.95 146.132-.958 146.171-.936Z' fill='#873C41'/><path d='M285.336 362.088c10.139 6.294 22.484 6.943 33.556 4.433 2.118-.482 3.82 1.296 4.347 3.339 5.406 21.004 36.059 31.967 51.431 18.499 1.193-1.046 3.309-1.293 4.559-.108 8.296 7.871 21.589 10.006 31.351 4.682 13.784-7.52 13.717-28.647 9.962-43.36-12.149 3.711-24.903 18.686-27.195 17.366-.03-.019-80.177-46.04-122.373-29.438.895 10.2 5.579 19.135 14.362 24.587Z' fill='#fff'/><path d='M400.293 443.788c-21.923-20.117-48.878-31.353-76.209-39.326-23.378-6.821-49.7-11.241-73.362-4.473 10.965 23.534 39.18 38.231 61.656 46.564 34.832 12.911 61.843 18.215 93.031 2.275-1.699-1.685-3.356-3.424-5.116-5.04Z' fill='#EE7E8B'/></g><g transform='matrix(.85472 0 0 .855 19 -17)'><g fill='#2A1200'><path d='M300.349 309.163c8.832-.16 17.674 3.022 25.496 7.773 4.691-4.793 6.946-12.983 5.183-21.539-2.472-12.006-11.824-20.057-20.887-17.979-9.064 2.078-14.402 13.498-11.926 25.504.461 2.254 1.232 4.311 2.134 6.241ZM416.11 310.627c1.302-2.877 2.067-6.392 1.993-10.23-.18-9.539-5.289-17.234-11.411-17.182-6.124.049-10.941 7.825-10.761 17.367.1 5.247 1.723 9.88 4.15 13.029 5.111-1.982 10.539-2.928 16.029-2.984Z'/></g><g fill='#71472D'><path d='M333.495 238.676c-13.683-2.225-28.346 2.887-38.189 13.256-3.173 3.343-4.061 9.273-.745 13.048 3.063 3.493 8.636 4.561 12.033.978a38.106 38.106 0 0 1 3.208-3.036c.351-.294 1.325-.816 1.631-1.249.171-.113.338-.226.513-.335a37.653 37.653 0 0 1 3.311-1.858 38.634 38.634 0 0 1 1.966-.902c.209-.087.419-.171.632-.256.582-.101 1.249-.416 1.78-.561a35.606 35.606 0 0 1 6.314-1.117c.67.003 1.339-.01 2.012.017 1.429.06 2.851.219 4.268.447 4.421.72 9.007-3.632 9.138-8.413.139-5.262-3.135-9.247-7.872-10.019ZM425.358 254.39c-4.968-6.836-12.27-11.322-20.146-12.625-2.126-.351-4.607.464-6.265 1.882-1.634 1.397-3.005 3.86-3.148 6.158-.147 2.387.324 4.948 1.815 6.825 1.511 1.903 3.407 3.111 5.715 3.496.378.062.745.168 1.122.25 1.11.383 2.183.856 3.23 1.411a23.874 23.874 0 0 1 3.349 2.746c.34.407.7.797 1.016 1.23 1.362 1.871 3.546 3.204 5.715 3.496 2.076.279 4.66-.388 6.264-1.886 1.663-1.55 2.996-3.699 3.148-6.158.153-2.451-.374-4.844-1.815-6.825Z'/></g></g><g transform='matrix(.85472 0 0 .85667 18 -15)'><g fill='rgba(34, 15, 0, 1)'><path d='M347.001 169.003c8.002 36.798 49.666 54.33 69.499 58.497 6.8 23.6 8.5 71.833 8.5 92.5 18.8 10 30.167 24.833 33.5 31.5-3.083-12.334-1.472-18.564.974-28.02 1.124-4.344 2.424-9.37 3.526-15.98 3.11-18.66-16.283-42.848-26.607-55.724A329.113 329.113 0 0 1 433 247.5c-4.144-5.363-2.821-17.025-1.362-29.888 1.534-13.519 3.218-28.363-1.138-38.612-8.5-20-36-37.5-50.5-39-5.961-.617-9.387-4.36-14.307-9.735-7.049-7.702-17.164-18.754-42.193-28.765-32.741-13.097-64.71-3.443-78.046 3.69-97.32 8.35-133.041 107.978-134.882 113.112-.039.11-.063.177-.072.198-8.842 22.018-13.961 45.938-14.583 70.288-.118 4.595-.056 9.201.195 13.802 38.09 6.472 56.129 47.303 60.388 66.91 0 0 11.333.667 14-1.5 14-7.333 38.9-37.4 26.5-99-6-28-2-50.294 47-85 30.415-21.543 72.002-21.35 103.001-14.997ZM453 432c4-7.333 12.8-26.3 14-41.5 5.5 5.167 16.9 19.3 18.5 34.5 1.098 10.436-3.535 19.665-7.521 27.604-3.271 6.516-6.106 12.163-4.979 16.896 2 8.4 6.5 13.833 8.5 15.5-13.667 6.167-50.1 15-80.5-5 9.927-5 35.024-22.4 52-48Z'/></g><path d='M347 169c-8.5-19.5-41-59.4-103-63 .457-.265.942-.536 1.454-.81-97.321 8.35-133.041 107.978-134.882 113.112-.039.11-.063.177-.072.198-8.842 22.018-13.961 45.938-14.583 70.288-.118 4.595-.056 9.201.195 13.802 38.09 6.472 56.129 47.303 60.388 66.91 0 0 11.333.667 14-1.5 14-7.333 38.9-37.4 26.5-99-6-28-2-50.294 47-85 30.415-21.542 72.002-21.35 103.001-14.997L347 169Z' fill='#000' fill-opacity='.3'/><mask id='hairHalfShavedHead-a' style='mask-color:alpha' maskUnits='userSpaceOnUse' x='244' y='95' width='242' height='398'><g fill='#238D81'><path d='M244 106c62 3.6 94.5 43.5 103 63 8 36.8 49.667 54.333 69.5 58.5 6.8 23.6 8.5 71.833 8.5 92.5 18.8 10 30.167 24.833 33.5 31.5-4.5-18 1-23 4.5-44s-21.5-49-30-60 6-48.5-2.5-68.5-36-37.5-50.5-39-14-21.5-56.5-38.5c-34-13.6-67.167-2.667-79.5 4.5ZM467 390.5c-1.2 15.2-10 34.167-14 41.5-16.976 25.6-42.073 43-52 48 30.4 20 66.833 11.167 80.5 5-2-1.667-6.5-7.1-8.5-15.5-2.5-10.5 14.5-25.5 12.5-44.5-1.6-15.2-13-29.333-18.5-34.5Z'/></g></mask><g fill='#000' fill-opacity='.15' mask='url(#hairHalfShavedHead-a)'><path d='M377 194.5c-12.4-9.6-20.5-26-23-33 3.5 6.527 16 22.266 38 33 22 10.734 30.167 22.806 31.5 27.5-8-14.5-31-15.5-46.5-27.5ZM449 313.5c.8-8.8-2-20-3.5-24.5 0 4.833-.5 16.5-2.5 24.5s-7.167 14.333-9.5 16.5l15.5 10c-6.5-9-1-15.5 0-26.5ZM472 438.5c4.4-9.6 1.833-18.667 0-22 0 19.5-8 19-16 35s-2 32-7 29.5c-4-2-5.667-6.833-6-9-2 12.4.833 22.5 2.5 26 14 1.6 23.5-6.667 26.5-11-12.5-18.5-5.5-36.5 0-48.5Z' style='mix-blend-mode:multiply'/></g></g><g transform='matrix(.85472 0 0 .85667 14 -12)'/></g></svg>''',
              ),
            ),
          );
    } on FirebaseAuthException catch (e) {
      switch (e.code) {
        case 'email-already-in-use':
          showAlertDialog(
            title: 'Ops!',
            message:
                'Email já esta em uso por outra conta, use outro email ou faça login.',
            type: AlertModalComponentType.warning,
          );
        case 'error_invalid_email':
          showAlertDialog(
            title: 'Ops!',
            message: 'Email invalido, verifique se a escrita esta correta.',
            type: AlertModalComponentType.warning,
          );
        case 'error_wrong_password':
          showAlertDialog(
            title: 'Ops!',
            message: 'Senha incorreta, digite novamente.',
            type: AlertModalComponentType.warning,
          );
        case 'error_user_not_found':
          showAlertDialog(
            title: 'Ops!',
            message:
                'Esse usuário foi deletado, entre em contato com o suporte para saber mais.',
            type: AlertModalComponentType.warning,
          );
        default:
          showAlertDialog(
            title: 'Ops!',
            message: e.toString(),
            type: AlertModalComponentType.warning,
          );
      }
    }
  }

  Future<void> registerWithGoogle() async {
    final userInstance = await repository.loginWithGoogle();

    if (userInstance != null) {
      try {
        await repository.createChild(
          userInstance,
          ChildModel(
            name: _childFieldController.text,
            sex: _childSex.value,
            photoURL: _childSex.value == 'male'
                ? '''<svg xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns#' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#' xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 480 480' fill='none'><metadata><rdf:RDF><cc:Work><dc:format>image/svg+xml</dc:format><dc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage'/><dc:title>Custom Avatar</dc:title><dc:creator><cc:Agent><dc:title>Ashley Seo</dc:title></cc:Agent></dc:creator><dc:source>https://www.figma.com/community/file/881358461963645496</dc:source><cc:license rdf:resource='https://creativecommons.org/licenses/by/4.0/'/></cc:Work><cc:License rdf:about='https://creativecommons.org/licenses/by/4.0/'><cc:permits rdf:resource='https://creativecommons.org/ns#Reproduction'/><cc:permits rdf:resource='https://creativecommons.org/ns#Distribution'/><cc:permits rdf:resource='https://creativecommons.org/ns#DerivativeWorks'/><cc:requires rdf:resource='https://creativecommons.org/ns#Notice'/><cc:requires rdf:resource='https://creativecommons.org/ns#Attribution'/></cc:License></rdf:RDF></metadata><mask id='avatarsRadiusMask'><rect width='480' height='480' rx='0' ry='0' x='0' y='0' fill='#fff'/></mask><g mask='url(#avatarsRadiusMask)'><g transform='matrix(.85775 0 0 .85427 52 47)'><path d='M263.989 38.62s131.387 20.593 121.424 208.128c-.036.695 15.192 10.822 16.384 11.904 10.619 9.62 19.527 21.94 23.423 36.351 13.872 51.319-35.724 104.196-75.83 118.231-14.981 5.242-30.815 7.787-46.681 8.249-103.139 3.009-239.69-62.655-246.703-190.893a172.056 172.056 0 0 1-.195-13.802c.621-24.349 6.488-48.063 15.33-70.082-.004.001 57.398-142.617 192.848-108.085Z' fill='rgba(100, 61, 25, 1)'/><path d='M388.739 248.727c-1.423 3.492-2.844 7.955-3.241 10.507-1.694 10.947 2.045 22.252 8.54 30.378 6.168 7.716 14.976 12.72 23.506 14.607 2.88.637 6.367.964 9.416 1.067-3.204-31.703-28.973-50.725-38.221-56.559ZM203.534 332.051c24.406-5.26 39.558-31.017 33.844-57.531-5.714-26.514-30.13-43.744-54.535-38.484-24.405 5.259-39.558 31.016-33.844 57.53 5.714 26.514 30.13 43.744 54.535 38.485Z' fill='#DC2400' style='mix-blend-mode:multiply' opacity='.1'/><path opacity='.1' d='M323.014 257.889s20.842-19.864 36.977-1.188Z' fill='#000'/><g><path d='M128.679 356.869c-69.38 34.83-132.35-52.512-112.18-101.609 12.866-31.317 50.38-33.752 72.118-5.146 12.829 16.883 23.209 38.464 29.103 59.108' fill='rgba(100, 61, 25, 1)'/><path opacity='.1' d='M71.534 278.927c8.927 9.099 16.103 22.593 24.923 30.12-1.63-12.595-4.232-26.045-10.34-37.396-6.201-11.528-17.479-21.025-28.962-20.242-14.23.971-25.947 17.573-27.454 32.626.9-9.008 18.99-15.104 25.894-14.251 10.812 20.413 14.998 60.644 14.998 60.644 9.007-22.775 5.36-40.689.941-51.501Z' fill='#000'/></g></g><g transform='matrix(.85472 0 0 .855 19 -17)'><path d='M393.348 366.944c3.015 1.731 24.097-24.743 38.134-16.689 4.739 2.719 8.354 7.356 11.069 12.367 5.966 11.023 8.007 24.415 5.604 36.769-3.401 17.468-15.188 31.769-29.053 41.248-37.308 25.5-66.905 20.68-106.724 5.918-31.343-11.617-74.048-35.531-65.201-78.677 15.573-75.95 146.132-.958 146.171-.936Z' fill='#873C41'/><path d='M285.336 362.088c10.139 6.294 22.484 6.943 33.556 4.433 2.118-.482 3.82 1.296 4.347 3.339 5.406 21.004 36.059 31.967 51.431 18.499 1.193-1.046 3.309-1.293 4.559-.108 8.296 7.871 21.589 10.006 31.351 4.682 13.784-7.52 13.717-28.647 9.962-43.36-12.149 3.711-24.903 18.686-27.195 17.366-.03-.019-80.177-46.04-122.373-29.438.895 10.2 5.579 19.135 14.362 24.587Z' fill='#fff'/><path d='M400.293 443.788c-21.923-20.117-48.878-31.353-76.209-39.326-23.378-6.821-49.7-11.241-73.362-4.473 10.965 23.534 39.18 38.231 61.656 46.564 34.832 12.911 61.843 18.215 93.031 2.275-1.699-1.685-3.356-3.424-5.116-5.04Z' fill='#EE7E8B'/></g><g transform='matrix(.85472 0 0 .855 19 -17)'><g fill='#2A1200'><path d='M300.349 309.163c8.832-.16 17.674 3.022 25.496 7.773 4.691-4.793 6.946-12.983 5.183-21.539-2.472-12.006-11.824-20.057-20.887-17.979-9.064 2.078-14.402 13.498-11.926 25.504.461 2.254 1.232 4.311 2.134 6.241ZM416.11 310.627c1.302-2.877 2.067-6.392 1.993-10.23-.18-9.539-5.289-17.234-11.411-17.182-6.124.049-10.941 7.825-10.761 17.367.1 5.247 1.723 9.88 4.15 13.029 5.111-1.982 10.539-2.928 16.029-2.984Z'/></g><g fill='#71472D'><path d='M333.495 238.676c-13.683-2.225-28.346 2.887-38.189 13.256-3.173 3.343-4.061 9.273-.745 13.048 3.063 3.493 8.636 4.561 12.033.978a38.106 38.106 0 0 1 3.208-3.036c.351-.294 1.325-.816 1.631-1.249.171-.113.338-.226.513-.335a37.653 37.653 0 0 1 3.311-1.858 38.634 38.634 0 0 1 1.966-.902c.209-.087.419-.171.632-.256.582-.101 1.249-.416 1.78-.561a35.606 35.606 0 0 1 6.314-1.117c.67.003 1.339-.01 2.012.017 1.429.06 2.851.219 4.268.447 4.421.72 9.007-3.632 9.138-8.413.139-5.262-3.135-9.247-7.872-10.019ZM425.358 254.39c-4.968-6.836-12.27-11.322-20.146-12.625-2.126-.351-4.607.464-6.265 1.882-1.634 1.397-3.005 3.86-3.148 6.158-.147 2.387.324 4.948 1.815 6.825 1.511 1.903 3.407 3.111 5.715 3.496.378.062.745.168 1.122.25 1.11.383 2.183.856 3.23 1.411a23.874 23.874 0 0 1 3.349 2.746c.34.407.7.797 1.016 1.23 1.362 1.871 3.546 3.204 5.715 3.496 2.076.279 4.66-.388 6.264-1.886 1.663-1.55 2.996-3.699 3.148-6.158.153-2.451-.374-4.844-1.815-6.825Z'/></g></g><g transform='matrix(.85472 0 0 .85667 18 -15)'><path d='M94.157 287.598c-.13 4.598-.08 9.206.163 13.809 38.507 6.383 56.652 47.191 60.911 66.797 0 0 11.46.64 14.162-1.535 14.178-7.371 39.434-37.515 27.044-99.117-5.999-28-1.899-50.315 47.742-85.16 49.642-34.845 128.476-13.318 144.626-.35C401.725 192.416 403.097 194 407 196.5c-34.364-77.5-101.862-87.673-101.862-87.673-136.906-34.218-195.309 108.616-195.305 108.615-8.996 22.052-14.988 45.792-15.676 70.156Z' fill='rgba(34, 15, 0, 1)'/></g><g transform='matrix(.85472 0 0 .85667 14 -12)'/></g></svg>'''
                : '''<svg xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns#' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#' xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 480 480' fill='none'><metadata><rdf:RDF><cc:Work><dc:format>image/svg+xml</dc:format><dc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage'/><dc:title>Custom Avatar</dc:title><dc:creator><cc:Agent><dc:title>Ashley Seo</dc:title></cc:Agent></dc:creator><dc:source>https://www.figma.com/community/file/881358461963645496</dc:source><cc:license rdf:resource='https://creativecommons.org/licenses/by/4.0/'/></cc:Work><cc:License rdf:about='https://creativecommons.org/licenses/by/4.0/'><cc:permits rdf:resource='https://creativecommons.org/ns#Reproduction'/><cc:permits rdf:resource='https://creativecommons.org/ns#Distribution'/><cc:permits rdf:resource='https://creativecommons.org/ns#DerivativeWorks'/><cc:requires rdf:resource='https://creativecommons.org/ns#Notice'/><cc:requires rdf:resource='https://creativecommons.org/ns#Attribution'/></cc:License></rdf:RDF></metadata><mask id='avatarsRadiusMask'><rect width='480' height='480' rx='0' ry='0' x='0' y='0' fill='#fff'/></mask><g mask='url(#avatarsRadiusMask)'><g transform='matrix(.85775 0 0 .85427 52 47)'><path d='M263.989 38.62s131.387 20.593 121.424 208.128c-.036.695 15.192 10.822 16.384 11.904 10.619 9.62 19.527 21.94 23.423 36.351 13.872 51.319-35.724 104.196-75.83 118.231-14.981 5.242-30.815 7.787-46.681 8.249-103.139 3.009-239.69-62.655-246.703-190.893a172.056 172.056 0 0 1-.195-13.802c.621-24.349 6.488-48.063 15.33-70.082-.004.001 57.398-142.617 192.848-108.085Z' fill='rgba(100, 61, 25, 1)'/><path d='M388.739 248.727c-1.423 3.492-2.844 7.955-3.241 10.507-1.694 10.947 2.045 22.252 8.54 30.378 6.168 7.716 14.976 12.72 23.506 14.607 2.88.637 6.367.964 9.416 1.067-3.204-31.703-28.973-50.725-38.221-56.559ZM203.534 332.051c24.406-5.26 39.558-31.017 33.844-57.531-5.714-26.514-30.13-43.744-54.535-38.484-24.405 5.259-39.558 31.016-33.844 57.53 5.714 26.514 30.13 43.744 54.535 38.485Z' fill='#DC2400' style='mix-blend-mode:multiply' opacity='.1'/><path opacity='.1' d='M323.014 257.889s20.842-19.864 36.977-1.188Z' fill='#000'/><g><path d='M128.679 356.869c-69.38 34.83-132.35-52.512-112.18-101.609 12.866-31.317 50.38-33.752 72.118-5.146 12.829 16.883 23.209 38.464 29.103 59.108' fill='rgba(100, 61, 25, 1)'/><path opacity='.1' d='M71.534 278.927c8.927 9.099 16.103 22.593 24.923 30.12-1.63-12.595-4.232-26.045-10.34-37.396-6.201-11.528-17.479-21.025-28.962-20.242-14.23.971-25.947 17.573-27.454 32.626.9-9.008 18.99-15.104 25.894-14.251 10.812 20.413 14.998 60.644 14.998 60.644 9.007-22.775 5.36-40.689.941-51.501Z' fill='#000'/></g></g><g transform='matrix(.85472 0 0 .855 19 -17)'><path d='M393.348 366.944c3.015 1.731 24.097-24.743 38.134-16.689 4.739 2.719 8.354 7.356 11.069 12.367 5.966 11.023 8.007 24.415 5.604 36.769-3.401 17.468-15.188 31.769-29.053 41.248-37.308 25.5-66.905 20.68-106.724 5.918-31.343-11.617-74.048-35.531-65.201-78.677 15.573-75.95 146.132-.958 146.171-.936Z' fill='#873C41'/><path d='M285.336 362.088c10.139 6.294 22.484 6.943 33.556 4.433 2.118-.482 3.82 1.296 4.347 3.339 5.406 21.004 36.059 31.967 51.431 18.499 1.193-1.046 3.309-1.293 4.559-.108 8.296 7.871 21.589 10.006 31.351 4.682 13.784-7.52 13.717-28.647 9.962-43.36-12.149 3.711-24.903 18.686-27.195 17.366-.03-.019-80.177-46.04-122.373-29.438.895 10.2 5.579 19.135 14.362 24.587Z' fill='#fff'/><path d='M400.293 443.788c-21.923-20.117-48.878-31.353-76.209-39.326-23.378-6.821-49.7-11.241-73.362-4.473 10.965 23.534 39.18 38.231 61.656 46.564 34.832 12.911 61.843 18.215 93.031 2.275-1.699-1.685-3.356-3.424-5.116-5.04Z' fill='#EE7E8B'/></g><g transform='matrix(.85472 0 0 .855 19 -17)'><g fill='#2A1200'><path d='M300.349 309.163c8.832-.16 17.674 3.022 25.496 7.773 4.691-4.793 6.946-12.983 5.183-21.539-2.472-12.006-11.824-20.057-20.887-17.979-9.064 2.078-14.402 13.498-11.926 25.504.461 2.254 1.232 4.311 2.134 6.241ZM416.11 310.627c1.302-2.877 2.067-6.392 1.993-10.23-.18-9.539-5.289-17.234-11.411-17.182-6.124.049-10.941 7.825-10.761 17.367.1 5.247 1.723 9.88 4.15 13.029 5.111-1.982 10.539-2.928 16.029-2.984Z'/></g><g fill='#71472D'><path d='M333.495 238.676c-13.683-2.225-28.346 2.887-38.189 13.256-3.173 3.343-4.061 9.273-.745 13.048 3.063 3.493 8.636 4.561 12.033.978a38.106 38.106 0 0 1 3.208-3.036c.351-.294 1.325-.816 1.631-1.249.171-.113.338-.226.513-.335a37.653 37.653 0 0 1 3.311-1.858 38.634 38.634 0 0 1 1.966-.902c.209-.087.419-.171.632-.256.582-.101 1.249-.416 1.78-.561a35.606 35.606 0 0 1 6.314-1.117c.67.003 1.339-.01 2.012.017 1.429.06 2.851.219 4.268.447 4.421.72 9.007-3.632 9.138-8.413.139-5.262-3.135-9.247-7.872-10.019ZM425.358 254.39c-4.968-6.836-12.27-11.322-20.146-12.625-2.126-.351-4.607.464-6.265 1.882-1.634 1.397-3.005 3.86-3.148 6.158-.147 2.387.324 4.948 1.815 6.825 1.511 1.903 3.407 3.111 5.715 3.496.378.062.745.168 1.122.25 1.11.383 2.183.856 3.23 1.411a23.874 23.874 0 0 1 3.349 2.746c.34.407.7.797 1.016 1.23 1.362 1.871 3.546 3.204 5.715 3.496 2.076.279 4.66-.388 6.264-1.886 1.663-1.55 2.996-3.699 3.148-6.158.153-2.451-.374-4.844-1.815-6.825Z'/></g></g><g transform='matrix(.85472 0 0 .85667 18 -15)'><g fill='rgba(34, 15, 0, 1)'><path d='M347.001 169.003c8.002 36.798 49.666 54.33 69.499 58.497 6.8 23.6 8.5 71.833 8.5 92.5 18.8 10 30.167 24.833 33.5 31.5-3.083-12.334-1.472-18.564.974-28.02 1.124-4.344 2.424-9.37 3.526-15.98 3.11-18.66-16.283-42.848-26.607-55.724A329.113 329.113 0 0 1 433 247.5c-4.144-5.363-2.821-17.025-1.362-29.888 1.534-13.519 3.218-28.363-1.138-38.612-8.5-20-36-37.5-50.5-39-5.961-.617-9.387-4.36-14.307-9.735-7.049-7.702-17.164-18.754-42.193-28.765-32.741-13.097-64.71-3.443-78.046 3.69-97.32 8.35-133.041 107.978-134.882 113.112-.039.11-.063.177-.072.198-8.842 22.018-13.961 45.938-14.583 70.288-.118 4.595-.056 9.201.195 13.802 38.09 6.472 56.129 47.303 60.388 66.91 0 0 11.333.667 14-1.5 14-7.333 38.9-37.4 26.5-99-6-28-2-50.294 47-85 30.415-21.543 72.002-21.35 103.001-14.997ZM453 432c4-7.333 12.8-26.3 14-41.5 5.5 5.167 16.9 19.3 18.5 34.5 1.098 10.436-3.535 19.665-7.521 27.604-3.271 6.516-6.106 12.163-4.979 16.896 2 8.4 6.5 13.833 8.5 15.5-13.667 6.167-50.1 15-80.5-5 9.927-5 35.024-22.4 52-48Z'/></g><path d='M347 169c-8.5-19.5-41-59.4-103-63 .457-.265.942-.536 1.454-.81-97.321 8.35-133.041 107.978-134.882 113.112-.039.11-.063.177-.072.198-8.842 22.018-13.961 45.938-14.583 70.288-.118 4.595-.056 9.201.195 13.802 38.09 6.472 56.129 47.303 60.388 66.91 0 0 11.333.667 14-1.5 14-7.333 38.9-37.4 26.5-99-6-28-2-50.294 47-85 30.415-21.542 72.002-21.35 103.001-14.997L347 169Z' fill='#000' fill-opacity='.3'/><mask id='hairHalfShavedHead-a' style='mask-color:alpha' maskUnits='userSpaceOnUse' x='244' y='95' width='242' height='398'><g fill='#238D81'><path d='M244 106c62 3.6 94.5 43.5 103 63 8 36.8 49.667 54.333 69.5 58.5 6.8 23.6 8.5 71.833 8.5 92.5 18.8 10 30.167 24.833 33.5 31.5-4.5-18 1-23 4.5-44s-21.5-49-30-60 6-48.5-2.5-68.5-36-37.5-50.5-39-14-21.5-56.5-38.5c-34-13.6-67.167-2.667-79.5 4.5ZM467 390.5c-1.2 15.2-10 34.167-14 41.5-16.976 25.6-42.073 43-52 48 30.4 20 66.833 11.167 80.5 5-2-1.667-6.5-7.1-8.5-15.5-2.5-10.5 14.5-25.5 12.5-44.5-1.6-15.2-13-29.333-18.5-34.5Z'/></g></mask><g fill='#000' fill-opacity='.15' mask='url(#hairHalfShavedHead-a)'><path d='M377 194.5c-12.4-9.6-20.5-26-23-33 3.5 6.527 16 22.266 38 33 22 10.734 30.167 22.806 31.5 27.5-8-14.5-31-15.5-46.5-27.5ZM449 313.5c.8-8.8-2-20-3.5-24.5 0 4.833-.5 16.5-2.5 24.5s-7.167 14.333-9.5 16.5l15.5 10c-6.5-9-1-15.5 0-26.5ZM472 438.5c4.4-9.6 1.833-18.667 0-22 0 19.5-8 19-16 35s-2 32-7 29.5c-4-2-5.667-6.833-6-9-2 12.4.833 22.5 2.5 26 14 1.6 23.5-6.667 26.5-11-12.5-18.5-5.5-36.5 0-48.5Z' style='mix-blend-mode:multiply'/></g></g><g transform='matrix(.85472 0 0 .85667 14 -12)'/></g></svg>''',
          ),
        );
      } on FirebaseAuthException catch (e) {
        switch (e.code) {
          case 'error_invalid_credential':
            showAlertDialog(
              title: 'Ops!',
              message: 'Conta do Google invalida',
              type: AlertModalComponentType.warning,
            );
          case 'error_account_exists_with_different_credential':
            showAlertDialog(
              title: 'Ops!',
              message: 'Essa conta Google esta em uso por outra conta.',
              type: AlertModalComponentType.warning,
            );
          case 'error_operation_not_allowed':
            showAlertDialog(
              title: 'Ops!',
              message: 'Contas Google nao estão habilitadas nesse dispositivo.',
              type: AlertModalComponentType.warning,
            );
          default:
            showAlertDialog(
              title: 'Ops!',
              message: e.toString(),
              type: AlertModalComponentType.warning,
            );
        }
      }
    }
  }

  Future<void> registerWithFacebook() async {
    final userInstance = await repository.loginWithFacebook();

    if (userInstance != null) {
      try {
        await repository.createChild(
          userInstance,
          ChildModel(
            name: _childFieldController.text,
            sex: _childSex.value,
            photoURL: _childSex.value == 'male'
                ? '''<svg xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns#' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#' xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 480 480' fill='none'><metadata><rdf:RDF><cc:Work><dc:format>image/svg+xml</dc:format><dc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage'/><dc:title>Custom Avatar</dc:title><dc:creator><cc:Agent><dc:title>Ashley Seo</dc:title></cc:Agent></dc:creator><dc:source>https://www.figma.com/community/file/881358461963645496</dc:source><cc:license rdf:resource='https://creativecommons.org/licenses/by/4.0/'/></cc:Work><cc:License rdf:about='https://creativecommons.org/licenses/by/4.0/'><cc:permits rdf:resource='https://creativecommons.org/ns#Reproduction'/><cc:permits rdf:resource='https://creativecommons.org/ns#Distribution'/><cc:permits rdf:resource='https://creativecommons.org/ns#DerivativeWorks'/><cc:requires rdf:resource='https://creativecommons.org/ns#Notice'/><cc:requires rdf:resource='https://creativecommons.org/ns#Attribution'/></cc:License></rdf:RDF></metadata><mask id='avatarsRadiusMask'><rect width='480' height='480' rx='0' ry='0' x='0' y='0' fill='#fff'/></mask><g mask='url(#avatarsRadiusMask)'><g transform='matrix(.85775 0 0 .85427 52 47)'><path d='M263.989 38.62s131.387 20.593 121.424 208.128c-.036.695 15.192 10.822 16.384 11.904 10.619 9.62 19.527 21.94 23.423 36.351 13.872 51.319-35.724 104.196-75.83 118.231-14.981 5.242-30.815 7.787-46.681 8.249-103.139 3.009-239.69-62.655-246.703-190.893a172.056 172.056 0 0 1-.195-13.802c.621-24.349 6.488-48.063 15.33-70.082-.004.001 57.398-142.617 192.848-108.085Z' fill='rgba(100, 61, 25, 1)'/><path d='M388.739 248.727c-1.423 3.492-2.844 7.955-3.241 10.507-1.694 10.947 2.045 22.252 8.54 30.378 6.168 7.716 14.976 12.72 23.506 14.607 2.88.637 6.367.964 9.416 1.067-3.204-31.703-28.973-50.725-38.221-56.559ZM203.534 332.051c24.406-5.26 39.558-31.017 33.844-57.531-5.714-26.514-30.13-43.744-54.535-38.484-24.405 5.259-39.558 31.016-33.844 57.53 5.714 26.514 30.13 43.744 54.535 38.485Z' fill='#DC2400' style='mix-blend-mode:multiply' opacity='.1'/><path opacity='.1' d='M323.014 257.889s20.842-19.864 36.977-1.188Z' fill='#000'/><g><path d='M128.679 356.869c-69.38 34.83-132.35-52.512-112.18-101.609 12.866-31.317 50.38-33.752 72.118-5.146 12.829 16.883 23.209 38.464 29.103 59.108' fill='rgba(100, 61, 25, 1)'/><path opacity='.1' d='M71.534 278.927c8.927 9.099 16.103 22.593 24.923 30.12-1.63-12.595-4.232-26.045-10.34-37.396-6.201-11.528-17.479-21.025-28.962-20.242-14.23.971-25.947 17.573-27.454 32.626.9-9.008 18.99-15.104 25.894-14.251 10.812 20.413 14.998 60.644 14.998 60.644 9.007-22.775 5.36-40.689.941-51.501Z' fill='#000'/></g></g><g transform='matrix(.85472 0 0 .855 19 -17)'><path d='M393.348 366.944c3.015 1.731 24.097-24.743 38.134-16.689 4.739 2.719 8.354 7.356 11.069 12.367 5.966 11.023 8.007 24.415 5.604 36.769-3.401 17.468-15.188 31.769-29.053 41.248-37.308 25.5-66.905 20.68-106.724 5.918-31.343-11.617-74.048-35.531-65.201-78.677 15.573-75.95 146.132-.958 146.171-.936Z' fill='#873C41'/><path d='M285.336 362.088c10.139 6.294 22.484 6.943 33.556 4.433 2.118-.482 3.82 1.296 4.347 3.339 5.406 21.004 36.059 31.967 51.431 18.499 1.193-1.046 3.309-1.293 4.559-.108 8.296 7.871 21.589 10.006 31.351 4.682 13.784-7.52 13.717-28.647 9.962-43.36-12.149 3.711-24.903 18.686-27.195 17.366-.03-.019-80.177-46.04-122.373-29.438.895 10.2 5.579 19.135 14.362 24.587Z' fill='#fff'/><path d='M400.293 443.788c-21.923-20.117-48.878-31.353-76.209-39.326-23.378-6.821-49.7-11.241-73.362-4.473 10.965 23.534 39.18 38.231 61.656 46.564 34.832 12.911 61.843 18.215 93.031 2.275-1.699-1.685-3.356-3.424-5.116-5.04Z' fill='#EE7E8B'/></g><g transform='matrix(.85472 0 0 .855 19 -17)'><g fill='#2A1200'><path d='M300.349 309.163c8.832-.16 17.674 3.022 25.496 7.773 4.691-4.793 6.946-12.983 5.183-21.539-2.472-12.006-11.824-20.057-20.887-17.979-9.064 2.078-14.402 13.498-11.926 25.504.461 2.254 1.232 4.311 2.134 6.241ZM416.11 310.627c1.302-2.877 2.067-6.392 1.993-10.23-.18-9.539-5.289-17.234-11.411-17.182-6.124.049-10.941 7.825-10.761 17.367.1 5.247 1.723 9.88 4.15 13.029 5.111-1.982 10.539-2.928 16.029-2.984Z'/></g><g fill='#71472D'><path d='M333.495 238.676c-13.683-2.225-28.346 2.887-38.189 13.256-3.173 3.343-4.061 9.273-.745 13.048 3.063 3.493 8.636 4.561 12.033.978a38.106 38.106 0 0 1 3.208-3.036c.351-.294 1.325-.816 1.631-1.249.171-.113.338-.226.513-.335a37.653 37.653 0 0 1 3.311-1.858 38.634 38.634 0 0 1 1.966-.902c.209-.087.419-.171.632-.256.582-.101 1.249-.416 1.78-.561a35.606 35.606 0 0 1 6.314-1.117c.67.003 1.339-.01 2.012.017 1.429.06 2.851.219 4.268.447 4.421.72 9.007-3.632 9.138-8.413.139-5.262-3.135-9.247-7.872-10.019ZM425.358 254.39c-4.968-6.836-12.27-11.322-20.146-12.625-2.126-.351-4.607.464-6.265 1.882-1.634 1.397-3.005 3.86-3.148 6.158-.147 2.387.324 4.948 1.815 6.825 1.511 1.903 3.407 3.111 5.715 3.496.378.062.745.168 1.122.25 1.11.383 2.183.856 3.23 1.411a23.874 23.874 0 0 1 3.349 2.746c.34.407.7.797 1.016 1.23 1.362 1.871 3.546 3.204 5.715 3.496 2.076.279 4.66-.388 6.264-1.886 1.663-1.55 2.996-3.699 3.148-6.158.153-2.451-.374-4.844-1.815-6.825Z'/></g></g><g transform='matrix(.85472 0 0 .85667 18 -15)'><path d='M94.157 287.598c-.13 4.598-.08 9.206.163 13.809 38.507 6.383 56.652 47.191 60.911 66.797 0 0 11.46.64 14.162-1.535 14.178-7.371 39.434-37.515 27.044-99.117-5.999-28-1.899-50.315 47.742-85.16 49.642-34.845 128.476-13.318 144.626-.35C401.725 192.416 403.097 194 407 196.5c-34.364-77.5-101.862-87.673-101.862-87.673-136.906-34.218-195.309 108.616-195.305 108.615-8.996 22.052-14.988 45.792-15.676 70.156Z' fill='rgba(34, 15, 0, 1)'/></g><g transform='matrix(.85472 0 0 .85667 14 -12)'/></g></svg>'''
                : '''<svg xmlns:dc='http://purl.org/dc/elements/1.1/' xmlns:cc='http://creativecommons.org/ns#' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns#' xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 480 480' fill='none'><metadata><rdf:RDF><cc:Work><dc:format>image/svg+xml</dc:format><dc:type rdf:resource='http://purl.org/dc/dcmitype/StillImage'/><dc:title>Custom Avatar</dc:title><dc:creator><cc:Agent><dc:title>Ashley Seo</dc:title></cc:Agent></dc:creator><dc:source>https://www.figma.com/community/file/881358461963645496</dc:source><cc:license rdf:resource='https://creativecommons.org/licenses/by/4.0/'/></cc:Work><cc:License rdf:about='https://creativecommons.org/licenses/by/4.0/'><cc:permits rdf:resource='https://creativecommons.org/ns#Reproduction'/><cc:permits rdf:resource='https://creativecommons.org/ns#Distribution'/><cc:permits rdf:resource='https://creativecommons.org/ns#DerivativeWorks'/><cc:requires rdf:resource='https://creativecommons.org/ns#Notice'/><cc:requires rdf:resource='https://creativecommons.org/ns#Attribution'/></cc:License></rdf:RDF></metadata><mask id='avatarsRadiusMask'><rect width='480' height='480' rx='0' ry='0' x='0' y='0' fill='#fff'/></mask><g mask='url(#avatarsRadiusMask)'><g transform='matrix(.85775 0 0 .85427 52 47)'><path d='M263.989 38.62s131.387 20.593 121.424 208.128c-.036.695 15.192 10.822 16.384 11.904 10.619 9.62 19.527 21.94 23.423 36.351 13.872 51.319-35.724 104.196-75.83 118.231-14.981 5.242-30.815 7.787-46.681 8.249-103.139 3.009-239.69-62.655-246.703-190.893a172.056 172.056 0 0 1-.195-13.802c.621-24.349 6.488-48.063 15.33-70.082-.004.001 57.398-142.617 192.848-108.085Z' fill='rgba(100, 61, 25, 1)'/><path d='M388.739 248.727c-1.423 3.492-2.844 7.955-3.241 10.507-1.694 10.947 2.045 22.252 8.54 30.378 6.168 7.716 14.976 12.72 23.506 14.607 2.88.637 6.367.964 9.416 1.067-3.204-31.703-28.973-50.725-38.221-56.559ZM203.534 332.051c24.406-5.26 39.558-31.017 33.844-57.531-5.714-26.514-30.13-43.744-54.535-38.484-24.405 5.259-39.558 31.016-33.844 57.53 5.714 26.514 30.13 43.744 54.535 38.485Z' fill='#DC2400' style='mix-blend-mode:multiply' opacity='.1'/><path opacity='.1' d='M323.014 257.889s20.842-19.864 36.977-1.188Z' fill='#000'/><g><path d='M128.679 356.869c-69.38 34.83-132.35-52.512-112.18-101.609 12.866-31.317 50.38-33.752 72.118-5.146 12.829 16.883 23.209 38.464 29.103 59.108' fill='rgba(100, 61, 25, 1)'/><path opacity='.1' d='M71.534 278.927c8.927 9.099 16.103 22.593 24.923 30.12-1.63-12.595-4.232-26.045-10.34-37.396-6.201-11.528-17.479-21.025-28.962-20.242-14.23.971-25.947 17.573-27.454 32.626.9-9.008 18.99-15.104 25.894-14.251 10.812 20.413 14.998 60.644 14.998 60.644 9.007-22.775 5.36-40.689.941-51.501Z' fill='#000'/></g></g><g transform='matrix(.85472 0 0 .855 19 -17)'><path d='M393.348 366.944c3.015 1.731 24.097-24.743 38.134-16.689 4.739 2.719 8.354 7.356 11.069 12.367 5.966 11.023 8.007 24.415 5.604 36.769-3.401 17.468-15.188 31.769-29.053 41.248-37.308 25.5-66.905 20.68-106.724 5.918-31.343-11.617-74.048-35.531-65.201-78.677 15.573-75.95 146.132-.958 146.171-.936Z' fill='#873C41'/><path d='M285.336 362.088c10.139 6.294 22.484 6.943 33.556 4.433 2.118-.482 3.82 1.296 4.347 3.339 5.406 21.004 36.059 31.967 51.431 18.499 1.193-1.046 3.309-1.293 4.559-.108 8.296 7.871 21.589 10.006 31.351 4.682 13.784-7.52 13.717-28.647 9.962-43.36-12.149 3.711-24.903 18.686-27.195 17.366-.03-.019-80.177-46.04-122.373-29.438.895 10.2 5.579 19.135 14.362 24.587Z' fill='#fff'/><path d='M400.293 443.788c-21.923-20.117-48.878-31.353-76.209-39.326-23.378-6.821-49.7-11.241-73.362-4.473 10.965 23.534 39.18 38.231 61.656 46.564 34.832 12.911 61.843 18.215 93.031 2.275-1.699-1.685-3.356-3.424-5.116-5.04Z' fill='#EE7E8B'/></g><g transform='matrix(.85472 0 0 .855 19 -17)'><g fill='#2A1200'><path d='M300.349 309.163c8.832-.16 17.674 3.022 25.496 7.773 4.691-4.793 6.946-12.983 5.183-21.539-2.472-12.006-11.824-20.057-20.887-17.979-9.064 2.078-14.402 13.498-11.926 25.504.461 2.254 1.232 4.311 2.134 6.241ZM416.11 310.627c1.302-2.877 2.067-6.392 1.993-10.23-.18-9.539-5.289-17.234-11.411-17.182-6.124.049-10.941 7.825-10.761 17.367.1 5.247 1.723 9.88 4.15 13.029 5.111-1.982 10.539-2.928 16.029-2.984Z'/></g><g fill='#71472D'><path d='M333.495 238.676c-13.683-2.225-28.346 2.887-38.189 13.256-3.173 3.343-4.061 9.273-.745 13.048 3.063 3.493 8.636 4.561 12.033.978a38.106 38.106 0 0 1 3.208-3.036c.351-.294 1.325-.816 1.631-1.249.171-.113.338-.226.513-.335a37.653 37.653 0 0 1 3.311-1.858 38.634 38.634 0 0 1 1.966-.902c.209-.087.419-.171.632-.256.582-.101 1.249-.416 1.78-.561a35.606 35.606 0 0 1 6.314-1.117c.67.003 1.339-.01 2.012.017 1.429.06 2.851.219 4.268.447 4.421.72 9.007-3.632 9.138-8.413.139-5.262-3.135-9.247-7.872-10.019ZM425.358 254.39c-4.968-6.836-12.27-11.322-20.146-12.625-2.126-.351-4.607.464-6.265 1.882-1.634 1.397-3.005 3.86-3.148 6.158-.147 2.387.324 4.948 1.815 6.825 1.511 1.903 3.407 3.111 5.715 3.496.378.062.745.168 1.122.25 1.11.383 2.183.856 3.23 1.411a23.874 23.874 0 0 1 3.349 2.746c.34.407.7.797 1.016 1.23 1.362 1.871 3.546 3.204 5.715 3.496 2.076.279 4.66-.388 6.264-1.886 1.663-1.55 2.996-3.699 3.148-6.158.153-2.451-.374-4.844-1.815-6.825Z'/></g></g><g transform='matrix(.85472 0 0 .85667 18 -15)'><g fill='rgba(34, 15, 0, 1)'><path d='M347.001 169.003c8.002 36.798 49.666 54.33 69.499 58.497 6.8 23.6 8.5 71.833 8.5 92.5 18.8 10 30.167 24.833 33.5 31.5-3.083-12.334-1.472-18.564.974-28.02 1.124-4.344 2.424-9.37 3.526-15.98 3.11-18.66-16.283-42.848-26.607-55.724A329.113 329.113 0 0 1 433 247.5c-4.144-5.363-2.821-17.025-1.362-29.888 1.534-13.519 3.218-28.363-1.138-38.612-8.5-20-36-37.5-50.5-39-5.961-.617-9.387-4.36-14.307-9.735-7.049-7.702-17.164-18.754-42.193-28.765-32.741-13.097-64.71-3.443-78.046 3.69-97.32 8.35-133.041 107.978-134.882 113.112-.039.11-.063.177-.072.198-8.842 22.018-13.961 45.938-14.583 70.288-.118 4.595-.056 9.201.195 13.802 38.09 6.472 56.129 47.303 60.388 66.91 0 0 11.333.667 14-1.5 14-7.333 38.9-37.4 26.5-99-6-28-2-50.294 47-85 30.415-21.543 72.002-21.35 103.001-14.997ZM453 432c4-7.333 12.8-26.3 14-41.5 5.5 5.167 16.9 19.3 18.5 34.5 1.098 10.436-3.535 19.665-7.521 27.604-3.271 6.516-6.106 12.163-4.979 16.896 2 8.4 6.5 13.833 8.5 15.5-13.667 6.167-50.1 15-80.5-5 9.927-5 35.024-22.4 52-48Z'/></g><path d='M347 169c-8.5-19.5-41-59.4-103-63 .457-.265.942-.536 1.454-.81-97.321 8.35-133.041 107.978-134.882 113.112-.039.11-.063.177-.072.198-8.842 22.018-13.961 45.938-14.583 70.288-.118 4.595-.056 9.201.195 13.802 38.09 6.472 56.129 47.303 60.388 66.91 0 0 11.333.667 14-1.5 14-7.333 38.9-37.4 26.5-99-6-28-2-50.294 47-85 30.415-21.542 72.002-21.35 103.001-14.997L347 169Z' fill='#000' fill-opacity='.3'/><mask id='hairHalfShavedHead-a' style='mask-color:alpha' maskUnits='userSpaceOnUse' x='244' y='95' width='242' height='398'><g fill='#238D81'><path d='M244 106c62 3.6 94.5 43.5 103 63 8 36.8 49.667 54.333 69.5 58.5 6.8 23.6 8.5 71.833 8.5 92.5 18.8 10 30.167 24.833 33.5 31.5-4.5-18 1-23 4.5-44s-21.5-49-30-60 6-48.5-2.5-68.5-36-37.5-50.5-39-14-21.5-56.5-38.5c-34-13.6-67.167-2.667-79.5 4.5ZM467 390.5c-1.2 15.2-10 34.167-14 41.5-16.976 25.6-42.073 43-52 48 30.4 20 66.833 11.167 80.5 5-2-1.667-6.5-7.1-8.5-15.5-2.5-10.5 14.5-25.5 12.5-44.5-1.6-15.2-13-29.333-18.5-34.5Z'/></g></mask><g fill='#000' fill-opacity='.15' mask='url(#hairHalfShavedHead-a)'><path d='M377 194.5c-12.4-9.6-20.5-26-23-33 3.5 6.527 16 22.266 38 33 22 10.734 30.167 22.806 31.5 27.5-8-14.5-31-15.5-46.5-27.5ZM449 313.5c.8-8.8-2-20-3.5-24.5 0 4.833-.5 16.5-2.5 24.5s-7.167 14.333-9.5 16.5l15.5 10c-6.5-9-1-15.5 0-26.5ZM472 438.5c4.4-9.6 1.833-18.667 0-22 0 19.5-8 19-16 35s-2 32-7 29.5c-4-2-5.667-6.833-6-9-2 12.4.833 22.5 2.5 26 14 1.6 23.5-6.667 26.5-11-12.5-18.5-5.5-36.5 0-48.5Z' style='mix-blend-mode:multiply'/></g></g><g transform='matrix(.85472 0 0 .85667 14 -12)'/></g></svg>''',
          ),
        );
      } on FirebaseAuthException catch (e) {
        switch (e.code) {
          case 'error_invalid_credential':
            showAlertDialog(
              title: 'Ops!',
              message: 'Conta do Facebook invalida',
              type: AlertModalComponentType.warning,
            );
          case 'error_account_exists_with_different_credential':
            showAlertDialog(
              title: 'Ops!',
              message: 'Essa conta Facebook esta em uso por outra conta.',
              type: AlertModalComponentType.warning,
            );
          case 'error_operation_not_allowed':
            showAlertDialog(
              title: 'Ops!',
              message:
                  'Contas Facebook nao estão habilitadas nesse dispositivo.',
              type: AlertModalComponentType.warning,
            );
          default:
            showAlertDialog(
              title: 'Ops!',
              message: e.toString(),
              type: AlertModalComponentType.warning,
            );
        }
      }
    }
  }
}
